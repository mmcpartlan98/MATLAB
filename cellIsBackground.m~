function [isBackground] = cellIsBackground(spectrum, number, backgroundPath)
% bgs is number of spectra in the library of backgrounds
bgs = 186;
spectrum = squeeze(smoothdata(spectrum, 'gaussian', 7));

% Assume only one background to be loaded for now
[~, correctedBG, ~, ~] = dptRead(backgroundPath, 1, bgs, 'y');
correctedBG = squeeze(smoothdata(correctedBG, 'gaussian', 5));

smallestError = Inf;
for index = 1:bgs
    % Attempt simple point-by-point subtraction-summation
    
    error = abs(spectrum - correctedBG(index, :)');
    errorSum = sum(error);
    
    if (errorSum < smallestError)
        smallestError = errorSum;
    end
end

for index = 1:bgs
            
            % Attempt simple point-by-point subtraction-summation
            
            
            errorSum = sum(error);
            smallestError = Inf;
            
            if (errorSum < smallestError)
                smallestError = errorSum;
            end
        end
        scoreArray(i, e) = smallestError;

if (smallestError > 550)
    isBackground = false;
else
    isBackground = true;
end
fprintf('Stripping background %d (Score: %d)\n', number, smallestError);
end